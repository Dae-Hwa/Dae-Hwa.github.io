---
title: TIL-20210926~1002
createdDate: "2021-09-28 03:24:26"
updatedDate: "2021-09-28 03:24:26"
author: 정대화
tags:
  - til
draft: false
---

## 09.27

### 포스트스쿼드1

#### 헤로쿠 서버

헤로쿠 서버가 제대로 작동하지 않는 것 처럼 보인다. 계속해서 인터셉터에서 로그인 인증을 하는 부분의 에러가 발생했는데, 서버의 문제인지 코드의 문제인지 유추하기가 힘들었다. 일단 OAuth 회원가입 부분이 막혀서 따로 이메일 가입을 진행해봤는데 정상적으로 작동하는 것을 확인했다. 제대로 되지 않는 데이터를 받아 다시 시도해봐야겠다.

#### 인수테스트와 엔티티 매니저

지난주에 봤던 트랜잭션 문제가 조금 더 심화되었다. 제인의 파트였는데, POST 인수테스트에서 제대로 만들어진 것을 검증하기 위해 엔티티 매니저로 조회를 하게 되면 레이지 로딩으로 등록된 객체 그래프가 로딩 되기 전 트랜잭션이 닫혀 제대로 조회되지 않는 문제였다. 일단 제인이 제시한 해결방안은 즉시 fetch하도록 옵션을 주는 것인데, 이렇게 되면 매 조회 시 마다 필요없는 객체그래프를 조회해야 하는 격이 될 수 있기 때문에 좋아보이지 않았다고 했다. 테스트를 위해 프로덕션 코드가 바뀌는 것이라 비슷한 생각을 했고, 개인적으로는 테스트를 위한 쿼리를 짜는게 더 좋은 방법이 아닌가 하는 생각이 들기도 했다. 메소드에 트랜잭션을 걸어서 확인하는 방법도 있지만, 이러면 인터셉터가 제대로 동작하지 않는다. before each 메소드를 달아놓은 부분이 테스트 메소드와 같은 실행단위라 생기는 문제인 것으로 생각된다. 내일 디버깅을 해봐야겠다.

하지만 근본적으로 인수테스트에서 이런 식으로 검증하는 것이 옳은지에 대한 고민도 하게됐다. 또한 데이터를 등록 하는 api에서 id를 리턴하고 이를 기반으로 검증하는 방법을 생각해볼 수 있지만, 이는 변화 가능성이 너무 높아 좋아보이지 않는다. 차라리 이렇게 할거면 기존의 개수를 카운트하고 추가한뒤 카운트 변화를 검증하는 식이 오히려 더 적합해 보인다.

### was1

지난주는 추석과 이것저것 바쁜일이 많아 통째로 쉬기로 결정했다. 간만에 진행해서 그런지 속도가 많이 더딘 느낌이었는데, 당분간 구현을 메인으로 나가기로 결정했으니 속도를 조금씩 붙여봐야겠다.

### 취준이야기

네이버 클라우드 코테가 있었다. 네 시간동안 네 문제를 풀었다. 한 문제에 한 시간 정도를 잡아야 하기에 처음에는 압박감이 있었지만 생각보다 빨리 풀리는 문제들도 있어 어렵다고 느껴지는 문제에 시간을 많이 투자할 수 있었다. 확실히 예전보다 실력향상이 된 것 같다. 다만, 이런 류의 코테에서 제한사항에 대한 예외를 충분히 고려하지 못하는 점이 항상 문제라 생각했고, 오늘도 그러한 부분이 꽤 나왔다. 다행히 이번에는 시간이 넉넉해 비교적 꼼꼼히 살펴볼 수 있었는데, 처음 구현시 부터 고려를 해보는 습관을 들이도록 연습해야겠다.

다른 사람들의 후기는 전반적으로 풀만했다는 의견이 많은 것으로 보인다. 물론 그런 사람들만 얘기를 해서 그런 것도 있지만 어찌됐건 자만하지말고 꾸준히 진행해 나가야 할 것 같다.

네이버 웹툰 서류는 떨어졌는데, 꽤나 정성들여 썼기때문에 조금 실망스러웠다. 나와 조건이 크게 다르지 않은 합격자에게 부탁해 서류를 받아봤는데, 비교해보고 보완점을 찾아봐야겠다.
