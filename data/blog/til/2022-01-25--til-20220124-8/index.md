---
title: TIL-20220124~8
createdDate: "2022-01-25 10:03:33"
updatedDate: "2022-01-25 10:03:33"
author: 정대화
tags:
  - til
draft: false
---

## 01.24

### 인턴1

#### 상태 관리

지난 주에 이어서 상태 관리에 관한 코드를 작성했다. 오늘은 테이블을 분리했는데, OneToOne으로 작업했다. 처음에는 식별관계로 만들고 싶었지만, 굳이 복잡성을 높일 이유가 없다고 판단했다.

JPA책에 조인 대상 테이블이 아닌 주인 테이블에 fk를 넣어주는게 개발자 입장에서는 편하다고 했는데, 이해를 못 하다가 저장 한 번 해보고 바로 깨달았다. 주종관계라는 것이 결국 참조를 가져올 수 있느냐에 관한 것이라 한 번에 업데이트나 조회 등이 되는지와 연관이 있는 것 같다. JPA 너무 어렵다 ..ㅋㅋ

지난주와 같이 상태를 관리하는 이유는 원하는 동작을 할 수 있는 상태를 제한하고, 또 해당 상태로 갈 수 있는 방법을 제한하는데 있는데, 단순히 속성만 가지고 생각하려면 너무 머리아프다. 일관성이 깨질 가능성도 높다. 코드 작성자마다 상태에 대한 이해가 다를 수도 있기 때문이다. 자연스럽게 테이블 조회도 줄어든다.

단점은. 객체지향적이지 않은 것 같다는 느낌이 얼핏 얼핏 든다. 왜 그런걸까? 객체 자체의 상태에 따라 행동하는 것이 아니라 특정 상태를 별도로 잡아놓고 상태에 따라 동작하도록 해서 그런 것 같은 느낌인데, 정확한 근거를 대기 힘들다. 생소해서 그럴 수도 있으니 좀 더 생각을 해봐야겠다.

#### time zone?

시간이 없는 날짜를 관리하는데도 타임존이 필요할까?

UTC든 KST든 날짜로만 표현한다면 그 날짜 자체가 올 것이다. DB에 DATETIME으로 저장하지 않으니 필요 없지 않을까? 하는 결론을 내렸다.

## 01.25

### 인턴2

#### 상태 관리2

전략 패턴이랑 상태 패턴 - 상태 패턴은 계속 변화하고, 전략 패턴은 한 번 정해지면 거의 변화가 없는 경우라고 한다. 그래서 상태 패턴은 스스로 상태변화를 계속해서 하기 때문에 주인은 현재 상태가 어떤지 신경쓰지 않아도 된다. 그냥 명령만 하면 다형성으로 알아서 처리하고 바꾼다.

반면 전략 패턴은 주인이 직접 전략을 바꿔줘야 한다. 보통은 객체 생성 시 넣어주고 안 바꾸는 식으로 하는 것 같다.

내가 했던 것은 상태 패턴인데, 복잡해져서 레이어를 하나 추가한 느낌이다.

DSP를 만드려고 하면서 비슷하지만 다른 경우가 생겼는데, 이번에는 특정 매개변수에 따라 동작이 달라져야 한다.

그런데 조회 방법까지 달라져 서비스 이후에 나누기 애매해졌다. 그래서 서비스를 여러개 만들어 선택하도록 하는 방법을 택하려고 한다. 이거는 전략패턴에 가까운 방법인듯 하다.

### 객체지향의 사실과 오해

다시 읽고 있다. 읽은 부분과 메모하는 부분을 따로 표시해가며 넘어가기로 했다. 읽을때는 끄덕끄덕 하지만, 잊고 있었던 부분들이 많다.
